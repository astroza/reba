cmake_minimum_required(VERSION 3.15)
project(Lake CXX)
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -O3")
set(SOURCE_FILES server.cc)

option(ENABLE_LIB_ONLY ON)
option(ENABLE_EXAMPLES OFF)
add_subdirectory(deps/nghttp2)

set(Boost_USE_STATIC_LIBS        OFF)
set(Boost_USE_DEBUG_LIBS         ON)
add_executable(lake ${SOURCE_FILES})
find_package(Boost 1.70.0 COMPONENTS  system coroutine)
if(!Boost_FOUND)
  message(SEND_ERROR "Boost needed to build Lake")
endif()
include_directories(${Boost_INCLUDE_DIRS})
target_link_libraries(lake ${Boost_LIBRARIES} nghttp2)
